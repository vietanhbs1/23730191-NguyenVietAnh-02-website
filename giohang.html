<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">

    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/giohang.css">
</head>

<body>
    <div class="container">
        <a href="../html/trangchu.html">
            <img src="../png/logo.png" height="130px">
        </a>

        <input type="text" id="search" placeholder="Tìm kiếm xe..." required>
        <ul class="menu">
            <a href="../html/diachimuahang.html">
                <li><i class="fas fa-home"></i> Địa chỉ mua hàng </li>
            </a>
            <a href="../html/lienhe.html">
                <li><i class="fas fa-phone-alt"></i> Liên Hệ</li>
            </a>
            <a href="../html/giohang.html">
                <li><i class="fas fa-shopping-cart"></i> Giỏ Hàng</li>
            </a>
        </ul>
    </div>

    <hr>
    <div class="background-video">
        <video src="../png/video.mp4" autoplay loop muted></video>
    </div>
    <div class="trang">
        <span>Trang Chủ</span>
        <span>&nbsp;-&nbsp;</span>
        <span>Giỏ Hàng</span>
    </div>
    <div class="section3">
        <h1>Giỏ Hàng Của Bạn</h1>
        <hr>
        <div class="cart-row">
            <div style="margin-left: 40px;">PRODUCT</div>
            <div>PRICE</div>
            <div>QUANTITY</div>
            <div>SUBTOTAL</div>
            <div>REMOVE</div>
        </div>
        <hr>
        <div id="cart-items"></div>
    </div>
    <div class="section3">
        <div class="section8">
            <h1 style="margin-left: 190px;font-size: 25px;font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;">CART TOTALS</h1>
            <div class="check-out1">
                <div style="margin-left: 10px;display: flex; justify-content: space-between;">
                    <h2>SUBTOTAL</h2>
                    <h2 id="subtotal" style="margin-right: 10px;">0 VND</h2>
                </div>
                <hr>
                <div style="margin-left: 10px;display: flex; justify-content: space-between;">
                    <h2>TOTAL</h2>
                    <h2 id="total" style="margin-right: 10px;">0 VND</h2>
                </div>
            </div>
            <a href="../html/muangay.html"><button style="margin-left: 190px;width: 385px;; padding: 8px;margin-top: 20px;">MUA NGAY</button></a>

        </div>
    </div>
    </div>


    <div class="footer">
        <div class="dia-chi-quan">
            <h1>HỆ THỐNG XE MÁY HONDA MIỀN NAM</h1>
            <h2><i class="fas fa-map-marker-alt" style="color: red;"></i> Showroom 1: 338 Đường Trần Hưng Đạo - Kp Đông B - Dĩ An - Bình Dương.</h2>
            <h2><i class="fas fa-map-marker-alt" style="color: red;"></i> Showroom 2: 21A Đ. Nguyễn Ảnh Thủ - Hiệp Thành - Quận 12 - Hồ Chí Minh.</h2>
            <h2><i class="fas fa-map-marker-alt" style="color: red;"></i> Showroom 4: 463B Nguyễn Thị Tú - Bình Hưng Hoà B - Bình Tân - Hồ Chí Minh.</h2>
            <h2><i class="fas fa-map-marker-alt" style="color: red;"></i> Showroom 6: 720 Đ. Hùng Vương - KP. Phước Hiệp - Nhơn Trạch - Đồng Nai.</h2>
            <h2><i class="fas fa-envelope" style="color: red;"></i> Email:xemayhondamiennam@gmail.com</h2>
            <h2><i class="fas fa-phone-alt" style="color: red;"></i> Hotline:0921313</h2>
        </div>
        <div class="dia-chi-quan">
            <h1>HỖ TRỢ KHÁCH HÀNG</h1>
            <h2><i class="fas fa-circle" style="color: red; font-size: 8px;"></i> Hướng dẫn mua hàng</h2>
            <h2><i class="fas fa-circle" style="color: red; font-size: 8px;"></i> Chính sách vận chuyễn</h2>
            <h2><i class="fas fa-circle" style="color: red; font-size: 8px;"></i> Chính sách thanh toán</h2>
            <h2><i class="fas fa-circle" style="color: red; font-size: 8px;"></i> Liên hệ</h2>
            <img src="../png/logo-da-thong-bao-bo-cong-thuong-removebg-preview.png" width="200px">
        </div>
        <div class="dia-chi-quan">
            <h1>BẢN ĐỒ</h1>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3917.6802424100106!2d106.71065097586974!3d10.911887756678745!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3174c87f5ebadb95%3A0x8492613e2aba6ae1!2zSG9uZGEgw5R0w7QgQsOsbmggRMawxqFuZyAtIFRodeG6rW4gQW4!5e0!3m2!1svi!2s!4v1744873238735!5m2!1svi!2s"
                width="350" height="350" style="border: px solid rgb(255, 255, 255); border-radius: 10px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
        </div>
    </div>

    <button id="scrollToTopBtn"><i class="fas fa-arrow-up"></i></button>
</body>
<script>
    const scrollBtn = document.getElementById("scrollToTopBtn");

    window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
            scrollBtn.classList.add("show");
        } else {
            scrollBtn.classList.remove("show");
        }
    });

    scrollBtn.addEventListener("click", () => {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        });
    });

    function displayShoppingCartItems() {
        const shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
        const cartItemsContainer = document.getElementById("cart-items");
        cartItemsContainer.innerHTML = "";

        let subtotal = 0;

        shoppingCart.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;

            const itemDiv = document.createElement("div");
            itemDiv.className = "cart-item";
            itemDiv.style.cssText = `
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 30px;
        margin-bottom: 20px;
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
    `;

            itemDiv.innerHTML = `
        <div style="flex: 2; display: flex; align-items: center; gap: 10px;">
            <div style="margin-left:40px; display: flex; align-items: center; gap: 10px;">
                <img src="${item.image}" width="80" height="80" style="object-fit: cover; border-radius: 8px;">
                <span style="font-weight: bold;">${item.name}</span>
            </div>
        </div>
        <div style="flex: 1;">${item.price.toLocaleString()} VND</div>
        <div style="flex: 1;">
            <input class="change_number" data-index="${index}" type="number" min="1" max="10" value="${item.quantity}" style="width: 60px; font-size: 13px; padding: 5px;">
        </div>
        <div class="item-total" style="flex: 1;">${itemTotal.toLocaleString()} VND</div>
        <div style="flex: 1;">
            <button class="remove-btn" data-index="${index}" style="width:50px; background: white; color: red; border: none; padding: 5px; border-radius: 4px; cursor: pointer;">❌</button>
        </div>
    `;

            cartItemsContainer.appendChild(itemDiv);
        });


        document.getElementById("subtotal").textContent = subtotal.toLocaleString() + " VND";
        document.getElementById("total").textContent = subtotal.toLocaleString() + " VND";


        document.querySelectorAll(".remove-btn").forEach(button => {
            button.onclick = function() {
                const index = this.dataset.index;
                let shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                shoppingCart.splice(index, 1);

                localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));
                displayShoppingCartItems();
            };
        });

        document.querySelectorAll(".change_number").forEach(input => {
            input.oninput = function() {
                const index = this.dataset.index;
                const newQuantity = parseInt(this.value);
                let shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                if (newQuantity > 0) {
                    shoppingCart[index].quantity = newQuantity;
                    localStorage.setItem("shoppingCart", JSON.stringify(shoppingCart));


                    const newItemTotal = shoppingCart[index].price * newQuantity;
                    this.closest(".cart-item").querySelector(".item-total").textContent = newItemTotal.toLocaleString() + " VND";

                    let newSubtotal = shoppingCart.reduce((total, item) => total + item.price * item.quantity, 0);
                    document.getElementById("subtotal").textContent = newSubtotal.toLocaleString() + " VND";
                    document.getElementById("total").textContent = newSubtotal.toLocaleString() + " VND";
                }
            };
        });
    }

    displayShoppingCartItems();
</script>

</html>