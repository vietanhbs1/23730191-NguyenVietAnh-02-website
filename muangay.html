<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../css/muangay.css">
</head>

<body>
    <div class="container">
        <a href="../html/trangchu.html">
            <img src="../png/logo.png" height="130px">
        </a>

        <input type="text" id="search" placeholder="Tìm kiếm xe..." required>
        <ul class="menu">
            <a href="../html/diachimuahang.html">
                <li><i class="fas fa-home"></i> Địa chỉ mua hàng </li>
            </a>
            <a href="../html/lienhe.html">
                <li><i class="fas fa-phone-alt"></i> Liên Hệ</li>
            </a>
            <a href="../html/giohang.html">
                <li><i class="fas fa-shopping-cart"></i> Giỏ Hàng</li>
            </a>
        </ul>
    </div>

    <hr>
    <div class="background-video">
        <video src="../png/video.mp4" autoplay loop muted></video>
    </div>
    <div class="trang">
        <span>Trang Chủ</span>
        <span>&nbsp;-&nbsp;</span>
        <span>Thanh Toán</span>
    </div>
    <h1 style="margin: auto;width: 70vw; margin-top: 30px;">THÔNG TIN THANH TOÁN</h1>
    <hr>
    <div class="section">

        <div class="section2" style="margin-left: 400px;">
            <div class="section6">
                <div class="form-dangky">
                    <div>
                        <input type="text" id="hovaten" placeholder="Họ và tên *">
                        <span class="error" id="err-hovaten"></span>
                    </div>
                    <div>
                        <input type="tel" id="sdt" placeholder="Số điện thoại *">
                        <span class="error" id="err-sdt"></span>
                    </div>
                    <div>
                        <input type="email" id="gmail" placeholder="Email *">
                        <span class="error" id="err-gmail"></span>
                    </div>
                    <div>
                        <input type="text" id="diachi" placeholder="Địa Chỉ *">
                        <span class="error" id="err-diachi"></span>
                    </div>
                </div>
                <div class="form-dangky">
                    <div>
                        <textarea type="text" id="noidung" placeholder="Nội dung *" style="resize: none; width: 250px; height: 207px;"></textarea>
                        <span class="error" id="err-noidung"></span>
                    </div>
                </div>
            </div>

            <div class="section3">
                <div class="section5">
                    <h1 style="font-size: 18px;margin-left: 0px;">ORDER</h1>
                    <h2 style="font-size: 18px;margin-left: 45px;">SUBTOTAL</h2>
                </div>
                <hr>
                <div id="cart-items" style="margin-top: 20px;margin-bottom: 20px;"></div>
                <hr>
                <div class='section5'>
                    <h1 style="font-size: 18px;margin-left: -10px;margin-left: 2px;">SUBTOTAL</h1>
                    <h2 id="subtotal">0 đ</h2>
                </div>
            </div>
            <div class="section">
                <fieldset>
                    <label for="bank-transfer">
                      <input type="radio" id="bank-transfer" name="payment" value="bank-transfer" checked />
                      Chuyển khoản ngân hàng
                    </label>
                    <div class="tooltip show" id="tooltip-bank-transfer">
                        Thực hiện thanh toán vào ngay tài khoản ngân hàng của chúng tôi. Vui lòng sử dụng Mã đơn hàng của bạn trong phần Nội dung thanh toán. Đơn hàng sẽ được giao sau khi tiền đã chuyển.
                    </div>

                    <label for="cod">
                      <input type="radio" id="cod" name="payment" value="cod" />
                      Trả tiền mặt khi nhận hàng
                    </label>
                    <div class="tooltip" id="tooltip-cod">
                        Quý khách sẽ thanh toán trực tiếp cho nhân viên giao hàng khi nhận được sản phẩm.
                    </div>
                </fieldset>
            </div>
            <button onclick="kiemTraForm()" style="border-radius:5px; border:2px;background-color:red;color:white;padding:10px;">GỬI THÔNG TIN</button>
        </div>
    </div>
    <div class="footer">
        <div class="dia-chi-quan">
            <h1>HỆ THỐNG XE MÁY HONDA MIỀN NAM</h1>
            <h2><i class="fas fa-map-marker-alt " style="color: red; "></i> Showroom 1: 338 Đường Trần Hưng Đạo - Kp Đông B - Dĩ An - Bình Dương.</h2>
            <h2><i class="fas fa-map-marker-alt " style="color: red; "></i> Showroom 2: 21A Đ. Nguyễn Ảnh Thủ - Hiệp Thành - Quận 12 - Hồ Chí Minh.</h2>
            <h2><i class="fas fa-map-marker-alt " style="color: red; "></i> Showroom 4: 463B Nguyễn Thị Tú - Bình Hưng Hoà B - Bình Tân - Hồ Chí Minh.</h2>
            <h2><i class="fas fa-map-marker-alt " style="color: red; "></i> Showroom 6: 720 Đ. Hùng Vương - KP. Phước Hiệp - Nhơn Trạch - Đồng Nai.</h2>
            <h2><i class="fas fa-envelope " style="color: red; "></i> Email:xemayhondamiennam@gmail.com</h2>
            <h2><i class="fas fa-phone-alt " style="color: red; "></i> Hotline:0921313</h2>
        </div>
        <div class="dia-chi-quan">
            <h1>HỖ TRỢ KHÁCH HÀNG</h1>
            <h2><i class="fas fa-circle " style="color: red; font-size: 8px; "></i> Hướng dẫn mua hàng</h2>
            <h2><i class="fas fa-circle " style="color: red; font-size: 8px; "></i> Chính sách vận chuyễn</h2>
            <h2><i class="fas fa-circle " style="color: red; font-size: 8px; "></i> Chính sách thanh toán</h2>
            <h2><i class="fas fa-circle " style="color: red; font-size: 8px; "></i> Liên hệ</h2>
            <img src="../png/logo-da-thong-bao-bo-cong-thuong-removebg-preview.png " width="200px ">
        </div>
        <div class="dia-chi-quan">
            <h1>BẢN ĐỒ</h1>
            <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3917.6802424100106!2d106.71065097586974!3d10.911887756678745!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3174c87f5ebadb95%3A0x8492613e2aba6ae1!2zSG9uZGEgw5R0w7QgQsOsbmggRMawxqFuZyAtIFRodeG6rW4gQW4!5e0!3m2!1svi!2s!4v1744873238735!5m2!1svi!2s "
                width="350 " height="350 " style="border: px solid rgb(255, 255, 255); border-radius: 10px; " allowfullscreen=" " loading="lazy " referrerpolicy="no-referrer-when-downgrade "></iframe>
        </div>
    </div>

    <button id="scrollToTopBtn "><i class="fas fa-arrow-up "></i></button>
</body>
<script>
    const bankTooltip = document.getElementById('tooltip-bank-transfer');
    const codTooltip = document.getElementById('tooltip-cod');
    const radios = document.querySelectorAll('input[name="payment"]');

    radios.forEach(radio => {
        radio.addEventListener('change', () => {
            if (radio.value === 'bank-transfer' && radio.checked) {
                bankTooltip.classList.add('show');
                codTooltip.classList.remove('show');
            } else if (radio.value === 'cod' && radio.checked) {
                bankTooltip.classList.remove('show');
                codTooltip.classList.add('show');
            }
        });
    });
    const scrollBtn = document.getElementById("scrollToTopBtn ");

    window.addEventListener("scroll ", () => {
        if (window.scrollY > 300) {
            scrollBtn.classList.add("show ");
        } else {
            scrollBtn.classList.remove("show ");
        }
    });

    scrollBtn.addEventListener("click ", () => {
        window.scrollTo({
            top: 0,
            behavior: "smooth "
        });
    });

    function kiemTraForm() {
        let hovatenEl = document.getElementById("hovaten");
        let sdtEl = document.getElementById("sdt");
        let gmailEl = document.getElementById("gmail");
        let diachiEl = document.getElementById("diachi");
        let noidungEl = document.getElementById("noidung");
        let hovaten = hovatenEl.value.trim();
        let sdt = sdtEl.value.trim();
        let gmail = gmailEl.value.trim();
        let diachi = diachiEl.value.trim();
        let noidung = noidungEl.value.trim();
        let errHoVaTen = document.getElementById("err-hovaten");
        let errSdt = document.getElementById("err-sdt");
        let errGmail = document.getElementById("err-gmail");
        let errDiaChi = document.getElementById("err-diachi");
        let errNoiDung = document.getElementById("err-noidung");


        [hovatenEl, sdtEl, gmailEl, diachiEl, noidungEl].forEach(el => el.classList.remove("error"));
        [errHoVaTen, errSdt, errGmail, errDiaChi, errNoiDung].forEach(el => el.textContent = "");

        let hopLe = true;


        if (hovaten === "") {
            errHoVaTen.textContent = "Vui lòng nhập họ và tên ";
            hovatenEl.classList.add("error ");
            hopLe = false;
        }

        if (sdt === "") {
            errSdt.textContent = "Vui lòng nhập số điện thoại ";
            sdtEl.classList.add("error ");
            hopLe = false;
        } else if (!/^\d{10,11}$/.test(sdt)) {
            errSdt.textContent = "Số điện thoại không hợp lệ (10-11 số) ";
            sdtEl.classList.add("error ");
            hopLe = false;
        }


        if (gmail === "") {
            errGmail.textContent = "Vui lòng nhập email ";
            gmailEl.classList.add("error ");
            hopLe = false;
        } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(gmail)) {
            errGmail.textContent = "Email không đúng định dạng ";
            gmailEl.classList.add("error ");
            hopLe = false;
        }


        if (diachi === "") {
            errDiaChi.textContent = "Vui lòng nhập địa chỉ ";
            diachiEl.classList.add("error ");
            hopLe = false;
        }


        if (noidung === "") {
            errNoiDung.textContent = "Vui lòng nhập nội dung ";
            noidungEl.classList.add("error ");
            hopLe = false;
        }

        if (hopLe) {
            alert("Cảm ơn bạn đã gửi thông tin. Chúng tôi sẽ liên hệ sớm nhất! ");


            [hovatenEl, sdtEl, gmailEl, diachiEl, noidungEl].forEach(el => {
                el.value = "";
                el.classList.remove("error");
            });
        }
    }

    function displayShoppingCartItems() {
        const shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
        const cartItemsContainer = document.getElementById("cart-items");
        cartItemsContainer.innerHTML = "";

        let subtotal = 0;

        shoppingCart.forEach((item, index) => {
            const itemTotal = item.price * item.quantity;
            subtotal += itemTotal;

            const itemDiv = document.createElement("div");
            itemDiv.className = "cart-item";
            itemDiv.style.cssText = `
            display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
        font-size: 18px;
        font-weight: bold;
        padding: 10px 40px; /* top-bottom 10px, left-right 10px */
        `;
            itemDiv.innerHTML = `
            <div class ="cart0" style="gap:50px">
            <div style="font-weight: normal;">${item.name} x <span style="font-weight: bold;">${item.quantity}</span></div>
            </div>
            <div>${itemTotal.toLocaleString()} đ</div>
        `;

            cartItemsContainer.appendChild(itemDiv);
        });


        document.getElementById("subtotal").textContent = subtotal.toLocaleString() + " đ";
        document.getElementById("total").textContent = subtotal.toLocaleString() + " đ";


        document.querySelectorAll(".remove-btn ").forEach(button => {
            button.onclick = function() {
                const index = this.dataset.index;
                let shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                shoppingCart.splice(index, 1);

                localStorage.setItem("shoppingCart ", JSON.stringify(shoppingCart));
                displayShoppingCartItems();
            };
        });

        document.querySelectorAll(".change_number ").forEach(input => {
            input.oninput = function() {
                const index = this.dataset.index;
                const newQuantity = parseInt(this.value);
                let shoppingCart = JSON.parse(localStorage.getItem('shoppingCart')) || [];
                if (newQuantity > 0) {
                    shoppingCart[index].quantity = newQuantity;
                    localStorage.setItem("shoppingCart ", JSON.stringify(shoppingCart));


                    const newItemTotal = shoppingCart[index].price * newQuantity;
                    this.closest(".cart-item ").querySelector(".item-total ").textContent = newItemTotal.toLocaleString() + " VND ";

                    let newSubtotal = shoppingCart.reduce((total, item) => total + item.price * item.quantity, 0);
                    document.getElementById("subtotal ").textContent = newSubtotal.toLocaleString() + " VND ";
                    document.getElementById("total ").textContent = newSubtotal.toLocaleString() + " VND ";
                }
            };
        });
    }

    displayShoppingCartItems();
</script>

</html>